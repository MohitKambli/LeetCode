class Solution:
    def punishmentNumber(self, n: int) -> int:
        def helper(index: int, target: int, s: str) -> bool:
            if index == len(s):
                return target == 0
            if target < 0:
                return False
            
            for i in range(index, len(s)):
                x = s[index : i+1]
                y = int(x)
                if helper(i+1, target - y, s):
                    return True
            return False
            
        ans: int = 0
        for i in range(1, n+1):
            square = i * i
            s = str(square)
            if helper(0, i, s):
                ans += (i * i)
        return ans
